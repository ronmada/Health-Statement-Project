(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{ziUY:function(e,t,n){"use strict";n.r(t),n.d(t,"MainFormPageModule",(function(){return W}));var i=n("ofXK"),o=n("3Pt+"),s=n("TEn/"),r=n("tyNb"),c=n("fXoL"),b=n("y+2E"),a=n("dHiT"),l=n("mrSG"),u=n("xgIS"),p=n("eIep"),m=n("zx2A");function h(e){return t=>t.lift(new d(e))}class d{constructor(e){this.notifier=e}call(e,t){const n=new v(e),i=Object(m.c)(this.notifier,new m.a(n));return i&&!n.seenValue?(n.add(i),t.subscribe(n)):n}}class v extends m.b{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var g=n("7o/Q");function f(){return e=>e.lift(new J)}class J{call(e,t){return t.subscribe(new K(e))}}class K extends g.a{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}let w=(()=>{class e{constructor(){this.signature=null}saveSignature(e){this.signature=e}getSignature(){return this.signature}clearSig(){this.signature=null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const S=["canvas"];let y=(()=>{class e{constructor(e,t){this.signatureService=e,this.popoverController=t,this.checkFlag=!1}ngAfterViewInit(){const e=this.canvas.nativeElement;this.cx=e.getContext("2d"),e.width=this.width,e.height=this.height,setTimeout(()=>{this.drawSavedSignatureOnCanvas()}),this.cx.lineWidth=2,this.cx.lineCap="round",this.cx.strokeStyle="black",this.captureEvents(e)}saveSigAs64String(){const e=this.canvas.nativeElement.toDataURL("image/png",1);this.popoverController.dismiss(e)}clearSig(){this.checkFlag=!1,this.signatureService.clearSig(),this.cx.clearRect(0,0,this.canvas.nativeElement.width,this.canvas.nativeElement.height)}drawSavedSignatureOnCanvas(){const e=this.signatureService.getSignature();if(null!==e){this.checkFlag=!0;const t=this.cx,n=new Image;n.src=e,n.onload=()=>{t.drawImage(n,0,0)}}}captureEvents(e){Object(u.a)(e,"mousedown").pipe(Object(p.a)(()=>Object(u.a)(e,"mousemove").pipe(h(Object(u.a)(e,"mouseup")),h(Object(u.a)(e,"mouseleave")),f()))).subscribe(t=>{const n=e.getBoundingClientRect();this.drawOnCanvas({x:t[0].clientX-n.left,y:t[0].clientY-n.top},{x:t[1].clientX-n.left,y:t[1].clientY-n.top})}),Object(u.a)(e,"touchstart").pipe(Object(p.a)(()=>Object(u.a)(e,"touchmove").pipe(h(Object(u.a)(e,"touchend")),h(Object(u.a)(e,"touchcancel")),f()))).subscribe(t=>{const n=e.getBoundingClientRect();this.drawOnCanvas({x:t[0].targetTouches[0].clientX-n.left,y:t[0].targetTouches[0].clientY-n.top},{x:t[1].targetTouches[0].clientX-n.left,y:t[1].targetTouches[0].clientY-n.top})})}drawOnCanvas(e,t){this.cx&&(this.cx.beginPath(),e&&(this.cx.moveTo(e.x,e.y),this.cx.lineTo(t.x,t.y),this.cx.stroke()),this.checkFlag=!0)}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(w),c.Hb(s.w))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-signature"]],viewQuery:function(e,t){var n;1&e&&c.ec(S,!0),2&e&&c.Xb(n=c.Sb())&&(t.canvas=n.first)},inputs:{width:"width",height:"height"},decls:8,vars:2,consts:[["canvas",""],[1,"flex-class"],["color","danger",3,"disabled","click"],[3,"disabled","click"]],template:function(e,t){1&e&&(c.Kb(0,"ion-content"),c.Ib(1,"canvas",null,0),c.Kb(3,"div",1),c.Kb(4,"ion-button",2),c.Rb("click",(function(){return t.clearSig()})),c.bc(5," \u05e0\u05e7\u05d4 "),c.Jb(),c.Kb(6,"ion-button",3),c.Rb("click",(function(){return t.saveSigAs64String()})),c.bc(7," \u05e9\u05de\u05d5\u05e8 "),c.Jb(),c.Jb(),c.Jb()),2&e&&(c.xb(4),c.Wb("disabled",!t.checkFlag),c.xb(2),c.Wb("disabled",!t.checkFlag))},directives:[s.g,s.d],styles:["canvas[_ngcontent-%COMP%]{background-color:#fff}.flex-class[_ngcontent-%COMP%]{display:flex;flex-direction:column}ion-content[_ngcontent-%COMP%]{--overflow:hidden}"]}),e})(),x=(()=>{class e{constructor(e,t){this.signatureService=e,this.popoverController=t,this.savedSigEvent=new c.n,this.buttonColor="warning"}saveSig(e){this.savedSigEvent.emit(e)}presentPopover(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.popoverController.create({component:y,cssClass:"my-custom-class",event:e,translucent:!0,backdropDismiss:!1,componentProps:{width:250,height:204}});return t.onDidDismiss().then(e=>{void 0!==e.data&&(this.buttonColor="success",this.saveSig(e.data),this.signatureService.saveSignature(e.data))}),yield t.present()}))}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(w),c.Hb(s.w))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-sig-pop"]],outputs:{savedSigEvent:"savedSigEvent"},decls:3,vars:1,consts:[[3,"color","click"]],template:function(e,t){1&e&&(c.Kb(0,"ion-content"),c.Kb(1,"ion-button",0),c.Rb("click",(function(e){return t.presentPopover(e)})),c.bc(2,"\u05d7\u05ea\u05d9\u05de\u05d4"),c.Jb(),c.Jb()),2&e&&(c.xb(1),c.Wb("color",t.buttonColor))},directives:[s.g,s.d],styles:[""]}),e})();function F(e,t){if(1&e&&(c.Kb(0,"ion-select-option",9),c.bc(1),c.Jb()),2&e){const e=t.$implicit;c.Wb("value",e),c.xb(1),c.dc("",e.firstName," ",e.lastName,"")}}let C=(()=>{class e{constructor(e,t){this.mainFormService=e,this.userService=t,this.studentForm=this.mainFormService.form,this.student=this.userService.user__}ngOnInit(){}saveSig(e){this.studentForm.get("signature").setValue(e)}submitStudentForm(){this.mainFormService.prepareFormForSubmit()}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(a.a),c.Hb(b.a))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-form-student"]],decls:50,vars:3,consts:[[3,"formGroup","ngSubmit"],["disabled",""],["formControlName","name"],["formControlName","id"],["position","stacked"],["formControlName","guardian","interface","popover"],[3,"value",4,"ngFor","ngForOf"],[3,"savedSigEvent"],["type","submit"],[3,"value"]],template:function(e,t){1&e&&(c.Kb(0,"form",0),c.Rb("ngSubmit",(function(){return t.submitStudentForm()})),c.Kb(1,"ion-grid"),c.Kb(2,"ion-row"),c.Kb(3,"ion-col"),c.Kb(4,"ion-item",1),c.Kb(5,"ion-label"),c.bc(6,"\u05e9\u05dd:"),c.Jb(),c.Ib(7,"ion-input",2),c.Jb(),c.Jb(),c.Kb(8,"ion-col"),c.Kb(9,"ion-item",1),c.Kb(10,"ion-label"),c.bc(11,"\u05ea.\u05d6:"),c.Jb(),c.Ib(12,"ion-input",3),c.Jb(),c.Jb(),c.Jb(),c.Kb(13,"ion-row"),c.Kb(14,"ion-col"),c.bc(15," \u05d0\u05e0\u05d9 \u05de\u05e6\u05d4\u05d9\u05e8 \u05db\u05d3\u05dc\u05d4\u05dc\u05df: "),c.Kb(16,"ion-row"),c.bc(17,"-\u05de\u05d3\u05d3\u05ea\u05d9 \u05d7\u05d5\u05dd \u05dc\u05d9\u05dc\u05d3\u05d9/\u05d9\u05dc\u05d3\u05ea\u05d9, \u05d5\u05e0\u05de\u05e6\u05d0 \u05db\u05d9 \u05d7\u05d5\u05dd \u05d2\u05d5\u05e4\u05d5/\u05d4 \u05de\u05ea\u05d7\u05ea \u05dc- 38 \u05de\u05e2\u05dc\u05d5\u05ea \u05e6\u05dc\u05d6\u05d9\u05d5\u05e1. "),c.Jb(),c.Kb(18,"ion-row"),c.bc(19,"-\u05d9\u05dc\u05d3\u05d9 / \u05d9\u05dc\u05d3\u05ea\u05d9 \u05dc\u05d0 \u05de\u05e9\u05ea\u05e2\u05dc \u05d5\u05d0\u05d9\u05df \u05dc\u05d5 \u05e7\u05e9\u05d9\u05d9\u05dd \u05d1\u05e0\u05e9\u05d9\u05de\u05d4*"),c.Jb(),c.Kb(20,"ion-row"),c.bc(21," -\u05dc\u05de\u05d9\u05d8\u05d1 \u05d9\u05d3\u05d9\u05e2\u05ea\u05d9 \u05d9\u05dc\u05d3\u05d9 \u05dc\u05d0 \u05d4\u05d9\u05d4 \u05d1\u05de\u05d2\u05e2 \u05e7\u05e8\u05d5\u05d1 \u05e2\u05dd \u05d7\u05d5\u05dc\u05d4 \u05e7\u05d5\u05e8\u05d5\u05e0\u05d4 \u05d1\u05e9\u05d1\u05d5\u05e2\u05d9\u05d9\u05dd \u05d4\u05d0\u05d7\u05e8\u05d5\u05e0\u05d9\u05dd. "),c.Jb(),c.Jb(),c.Jb(),c.Kb(22,"ion-row"),c.Kb(23,"ion-col"),c.Kb(24,"ion-item"),c.Kb(25,"ion-label",4),c.bc(26,"\u05e9\u05dd \u05d4\u05d4\u05d5\u05e8\u05d4:"),c.Jb(),c.Kb(27,"ion-select",5),c.ac(28,F,2,3,"ion-select-option",6),c.Jb(),c.Jb(),c.Jb(),c.Kb(29,"ion-col"),c.Kb(30,"ion-item",1),c.Kb(31,"ion-label",4),c.bc(32,"\u05ea.\u05d6:"),c.Jb(),c.Kb(33,"ion-input"),c.bc(34),c.Jb(),c.Jb(),c.Jb(),c.Jb(),c.Kb(35,"ion-row"),c.Kb(36,"ion-col"),c.Kb(37,"ion-item"),c.Kb(38,"ion-label",4),c.bc(39,"\u05ea\u05d0\u05e8\u05d9\u05da:"),c.Jb(),c.Ib(40,"ion-input"),c.Jb(),c.Jb(),c.Jb(),c.Kb(41,"ion-row"),c.Kb(42,"ion-col"),c.Kb(43,"app-sig-pop",7),c.Rb("savedSigEvent",(function(e){return t.saveSig(e)})),c.Jb(),c.Jb(),c.Kb(44,"ion-col"),c.Kb(45,"ion-button",8),c.bc(46,"\u05e9\u05dc\u05d7"),c.Jb(),c.Jb(),c.Jb(),c.Kb(47,"ion-col"),c.Kb(48,"ion-row"),c.bc(49," *\u05dc\u05de\u05e2\u05d8 \u05e9\u05d9\u05e2\u05d5\u05dc \u05d0\u05d5 \u05e7\u05d5\u05e9\u05d9 \u05d1\u05e0\u05e9\u05d9\u05de\u05d4 \u05d4\u05e0\u05d5\u05d1\u05e2 \u05de\u05de\u05e6\u05d1 \u05db\u05e8\u05d5\u05e0\u05d9 \u05db\u05d2\u05d5\u05df \u05d0\u05e1\u05d8\u05de\u05d4 \u05d0\u05d5 \u05d0\u05dc\u05e8\u05d2\u05d9\u05d4 \u05d0\u05d7\u05e8\u05ea. "),c.Jb(),c.Jb(),c.Jb(),c.Jb()),2&e&&(c.Wb("formGroup",t.studentForm),c.xb(28),c.Wb("ngForOf",t.student.guardian),c.xb(6),c.cc(t.studentForm.get("guardian").value.id))},directives:[o.n,o.k,o.d,s.h,s.o,s.f,s.l,s.m,s.k,s.y,o.j,o.b,s.p,s.x,i.h,x,s.d,s.q],styles:[""]}),e})();function k(e,t){if(1&e&&(c.Kb(0,"ion-select-option",9),c.bc(1),c.Jb()),2&e){const e=t.$implicit;c.Wb("value",e),c.xb(1),c.cc(e.name)}}let O=(()=>{class e{constructor(e,t){this.mainFormService=e,this.userService=t,this.employeeForm=this.mainFormService.form,this.employee=this.userService.user__}ngOnInit(){}saveSig(e){this.employeeForm.get("signature").setValue(e)}submitEmployeeForm(){this.mainFormService.prepareFormForSubmit()}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(a.a),c.Hb(b.a))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-form-employee"]],decls:44,vars:2,consts:[[3,"formGroup","ngSubmit"],["formControlName","id"],["formControlName","name"],["position","stacked"],["formControlName","institute","interface","popover"],[3,"value",4,"ngFor","ngForOf"],["position","floating"],[3,"savedSigEvent"],["type","submit"],[3,"value"]],template:function(e,t){1&e&&(c.Kb(0,"form",0),c.Rb("ngSubmit",(function(){return t.submitEmployeeForm()})),c.Kb(1,"ion-grid"),c.Kb(2,"ion-row"),c.Kb(3,"ion-col"),c.Kb(4,"ion-item"),c.Kb(5,"ion-label"),c.bc(6,"\u05ea.\u05d6:"),c.Jb(),c.Ib(7,"ion-input",1),c.Jb(),c.Jb(),c.Kb(8,"ion-col"),c.Kb(9,"ion-item"),c.Kb(10,"ion-label"),c.bc(11,"\u05e9\u05dd:"),c.Jb(),c.Ib(12,"ion-input",2),c.Jb(),c.Jb(),c.Jb(),c.Kb(13,"ion-row"),c.Kb(14,"ion-col"),c.Kb(15,"ion-item"),c.Kb(16,"ion-label",3),c.bc(17,"\u05de\u05e7\u05d5\u05dd \u05e2\u05d1\u05d5\u05d3\u05d4:"),c.Jb(),c.Kb(18,"ion-select",4),c.ac(19,k,2,2,"ion-select-option",5),c.Jb(),c.Jb(),c.Jb(),c.Jb(),c.Kb(20,"ion-row"),c.Kb(21,"ion-col"),c.bc(22," \u05d0\u05e0\u05d9 \u05de\u05e6\u05d4\u05d9\u05e8 \u05db\u05d9: "),c.Kb(23,"ion-row"),c.bc(24," 1. \u05de\u05d3\u05d3\u05ea\u05d9 \u05d7\u05d5\u05dd \u05d1\u05d1\u05d5\u05e7\u05e8, \u05d5\u05dc\u05d0 \u05d4\u05d9\u05d4 \u05dc\u05d9 \u05d7\u05d5\u05dd \u05de\u05e2\u05dc 38."),c.Jb(),c.Kb(25,"ion-row"),c.bc(26,"2. \u05d0\u05d9\u05df \u05dc\u05d9 \u05ea\u05e1\u05de\u05d9\u05e0\u05d9 \u05e7\u05d5\u05e8\u05d5\u05e0\u05d4 (\u05e9\u05d9\u05e2\u05d5\u05dc,\u05e7\u05d5\u05e9\u05d9 \u05d1\u05e0\u05e9\u05d9\u05de\u05d4* \u05d0\u05d5 \u05db\u05dc \u05ea\u05e1\u05de\u05d9\u05df \u05e0\u05e9\u05d9\u05de\u05ea\u05d9 \u05d0\u05d7\u05e8)."),c.Jb(),c.Kb(27,"ion-row"),c.bc(28," 3. \u05dc\u05d0 \u05d4\u05d9\u05d9\u05ea\u05d9 \u05d1\u05de\u05d2\u05e2 \u05e7\u05e8\u05d5\u05d1 \u05e2\u05dd \u05d7\u05d5\u05dc\u05d4 \u05e7\u05d5\u05e8\u05d5\u05e0\u05d4 \u05d1\u05e9\u05d1\u05d5\u05e2\u05d9\u05d9\u05dd \u05d4\u05d0\u05d7\u05e8\u05d5\u05e0\u05d9\u05dd. "),c.Jb(),c.Jb(),c.Jb(),c.Kb(29,"ion-row"),c.Kb(30,"ion-col"),c.Kb(31,"ion-item"),c.Kb(32,"ion-label",6),c.bc(33,"\u05ea\u05d0\u05e8\u05d9\u05da:"),c.Jb(),c.Ib(34,"ion-input"),c.Jb(),c.Jb(),c.Jb(),c.Kb(35,"ion-row"),c.Kb(36,"ion-col"),c.Kb(37,"app-sig-pop",7),c.Rb("savedSigEvent",(function(e){return t.saveSig(e)})),c.Jb(),c.Jb(),c.Kb(38,"ion-col"),c.Kb(39,"ion-button",8),c.bc(40,"\u05e9\u05dc\u05d7"),c.Jb(),c.Jb(),c.Jb(),c.Kb(41,"ion-col"),c.Kb(42,"ion-row"),c.bc(43," *\u05dc\u05de\u05e2\u05d8 \u05e9\u05d9\u05e2\u05d5\u05dc \u05d0\u05d5 \u05e7\u05d5\u05e9\u05d9 \u05d1\u05e0\u05e9\u05d9\u05de\u05d4 \u05d4\u05e0\u05d5\u05d1\u05e2 \u05de\u05de\u05e6\u05d1 \u05db\u05e8\u05d5\u05e0\u05d9 \u05db\u05d2\u05d5\u05df \u05d0\u05e1\u05d8\u05de\u05d4 \u05d0\u05d5 \u05d0\u05dc\u05e8\u05d2\u05d9\u05d4 \u05d0\u05d7\u05e8\u05ea. "),c.Jb(),c.Jb(),c.Jb(),c.Jb()),2&e&&(c.Wb("formGroup",t.employeeForm),c.xb(19),c.Wb("ngForOf",t.employee.institute))},directives:[o.n,o.k,o.d,s.h,s.o,s.f,s.l,s.m,s.k,s.y,o.j,o.b,s.p,s.x,i.h,x,s.d,s.q],styles:[""]}),e})();function E(e,t){1&e&&c.Ib(0,"app-form-student")}function I(e,t){1&e&&c.Ib(0,"app-form-employee")}const j=[{path:"",component:(()=>{class e{constructor(e){this.userService=e,this.user=this.userService.user__}}return e.\u0275fac=function(t){return new(t||e)(c.Hb(b.a))},e.\u0275cmp=c.Bb({type:e,selectors:[["app-main-form"]],decls:9,vars:2,consts:[["color","primary"],[1,"ion-no-padding"],["slot","start"],["icon","arrow-forward","defaultHref","/home"],[4,"ngIf"]],template:function(e,t){1&e&&(c.Kb(0,"ion-header"),c.Kb(1,"ion-toolbar",0),c.Kb(2,"ion-title",1),c.bc(3,"\u05d4\u05e6\u05d4\u05e8\u05ea \u05d1\u05e8\u05d9\u05d0\u05d5\u05ea"),c.Jb(),c.Kb(4,"ion-buttons",2),c.Ib(5,"ion-back-button",3),c.Jb(),c.Jb(),c.Jb(),c.Kb(6,"ion-content"),c.ac(7,E,1,0,"app-form-student",4),c.ac(8,I,1,0,"app-form-employee",4),c.Jb()),2&e&&(c.xb(7),c.Wb("ngIf","Student"===t.user.userType),c.xb(1),c.Wb("ngIf","Employee"===t.user.userType))},directives:[s.i,s.s,s.r,s.e,s.b,s.c,s.g,i.i,C,O],styles:[""]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=c.Fb({type:e}),e.\u0275inj=c.Eb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(j)],r.i]}),e})(),W=(()=>{class e{}return e.\u0275mod=c.Fb({type:e}),e.\u0275inj=c.Eb({factory:function(t){return new(t||e)},imports:[[i.b,o.e,s.t,P,o.m]]}),e})()}}]);